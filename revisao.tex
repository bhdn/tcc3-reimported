%
% Revisão da Literatura
%

\chapter{Revisão da literatura}

\section{Aprendizado de Máquina}\label{sec:aprendizado}

\input{aprendizado.tex}

\section{Virtualização}\label{sec:virt}

O conceito clássico de virtualização consiste na execução simulada de cada
instrução de uma determinada arquitetura bem como a emulação de seu
hardware original, de maneira a permitir que qualquer sistema operacional
compatível possa executar também neste ambiente~\cite{goldberg1974survey}.
Diferentemente do que se observa na arquitetura clássica de computadores,
aonde cada componente provê uma abstração os componentes mais próximos do
usuário, a virtualização multiplexa os serviços de hardware para
componentes virtuais, que possam ser utilizandos por sistemas operacionais
sem adaptações XXX. % FIXME citar os br da 'revisao de virtualizacao'

% FIXME colocar aqui uma figura mostrando uma arquitetura com virtualização

Atribui-se ao sistema \emph{OS/360} a introdução do conceito de
virtualização, que neste caso era limitada a apenas uma instância de uma
\emph{máquina virtual} para os processos não-privilegiados. Com o passar do
tempo isto foi aprimorado com o desenvolvimento dos \emph{Monitores de
Máquinas Virtuais} (também conhecidos como hipervisores ou
\emph{hypervisors}), que eram softwares especializados em executar um
conjunto de instruções de alguma arquitetura e que permitiam então, por
estar não relacionado a um serviço de sistema operacional, executar
múltiplas máquinas virtuais, permitindo assim que o custo computacional com
a execução simulada das instruções fosse compensado com a execução de
muitas máquinas virtuais, aproveitando assim o tempo de
CPU~\cite{goldberg1974survey}.

Com a popularização da internet e o barateamento do hardware, a
virtualização começou a ser utilizada com o intuito de facilitar a
manutenção em ambiente de servidores. A facilidade da criação e
configuração permitiu que serviços executem em máquinas (virtuais)
dedicadas, aumentando a segurança (por meio do isolamento) e facilitando a
manutenção com menor risco de comprometimento de outros
serviços~\cite{smith2005architecture}.

% FIXME citar aqui introdução do conceito de cloudcomputing

% FIXME começar a descrever tolerância a faltas, e então descrever migração
% e as tais técnicas de sincronização de blabla

% FIXME remover essa porcaria
É importante apresentar alguns conceitos que são amplamente utilizados ao
tratar de virtualização, como apresentado por
\citeonline{peter2005resource}:
\begin{description}
  \item[hóspede] refere-se à máquina virtual;
  \item[hospedeiro] refere-se ao Monitor de Máquinas Virtuais;
  \item[paravirtualização] conjunto de técnicas no qual o hóspede oferece
        serviços ao hospedeiro, que por sua vez possui suporte explícito a
        eles;
  \item[migração] ocorre quando todo o estado de um hóspede
       (memória, registradores, dispositivos) que está executando em um
       determinado hospedeiro é transfeirido para outro, de maneira que a
       execução do hóspede prossegue, sem que software executando dentro
       desta note diferença.
\end{description}

\subsection{Ferramentas}

Atualmente existe uma grande diversidade de ferramentas que atuam como
monitores de máquinas virtuais. Algumas utilizam implementações de
virtualização utilizando técnicas mais simples e com maior custo
computacional, ao passo que outras são mais sofisticadas, além do uso de
recursos de virtualização disponíveis em CPUs modernas.

A família de produtos oferecida pela empresa VMWare está entre as mais
populares ferramentas de virtualização utilizadas atualmente. Seu primeiro
produto, chamado \emph{VMWare Workstation}, foi lançado em
1999~\cite{vmwareMilestones} e tornou-se popular em razão de seu bom
desempenho resultante do uso de técnicas de tradução binária dinâmica.

Tradução binária dinâmica é uma técnica que visa fazer com que o processador
execute diretamente as instruções de uma máquina virtual, evitando assim o
custo computacional de uma emulação por parte do MMV. Porém, a máquina virtual
não terá permissão para executar todas as instruções, pois o monitor de
máquinas virtuais é um processo não-privivilegiado no sistema hospedeiro, e o
\emph{kernel} do sistema hóspede certamente terá a necessidade de utilizar tais
instruções privilegiadas. Assim, é necessário que o MMV substitua as instruções
que precisam privilégio por instruções que transferem o controle para si, de
maneira que ele possa emular estas instruções
privilegiadas~\cite{ung2000machine}.

As técnicas mais primitivas de tradução binárias exigiam que a arquitetura
do sistema hospedeiro fosse a mesma do sistema hóspede. A ferramenta
QEMU\footnote{http://qemu.org/} tornou-se popular por prover uma técnica de
tradução dinâmica binária entre arquiteturas diferentes de maneira
eficiente. Definiu-se um conjunto reduzido de \emph{micro operações} que
são usadas para compor pequenas funções que descrevem o comportamento
individual de grande parte das instruções de cada uma das arquiteturas
suportadas por essa ferramenta. A implementação das micro operações é feita
também é feita em linguagem C, permitindo assim o aproveitamento de todo o
trabalho feito ao implementar um compilador C para a arquitetura do
hóspede~\cite{bellard2005qemu}.

Além disso, uma outra ferramenta muito popular para virtualização é a
VirtualBox.

% mais ferramentas interessantes: bochs, denali, ibm rhype, virtualbox,
% virtualpc (ms)

% introdução
% ferramentas

% descrição de medidas de carga de CPU: loadavg e percentual de uso de CPU

\subsection{\libvirt}\label{sec:libvirt}

% uma descrição mais detalhada, 
% virt-manager
% virsh
% "conceitos"

A \libvirt{} é um conjunto de ferramentas que visa prover uma abstração
uniforme para gerenciamento de máquinas virtuais de maneira independente da
da aplicação de virtualização que está sendo utilizada. Seu desenvolvimento
foi iniciado em 2005 pela empresa Red Hat e inicialmente chamava-se
\emph{libxen} (indicando assim que era uma abstração específica para a
ferramenta \emph{Xen}), porém teve seu nome alterado para \libvirt{} em
2006, de maneira a refletir o interesse em suportar mais ferramentas de
virtualização \apud{gitlibvirt}{eriksson2009virtualization}.

\subsubsection{Interface de programação}\label{sec:libvirtapi}

\emph{Trecho ainda não concluído}.
